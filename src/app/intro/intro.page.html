<ion-content [fullscreen]="true">
  <!-- Secci贸n de Progreso Fija en el Tope -->
  <div class="progress-section">
    <ion-progress-bar class="intro-progress" [value]="getProgressValue()"></ion-progress-bar>
    <div class="progress-info">
      <div class="step-counter">
        Paso <strong>{{ currentIndex + 1 }}</strong> de {{ slides.length }}
      </div>
      <div class="percentage-badge">
        {{ (getProgressValue() * 100) | number:'1.0-0' }}% completado
      </div>
    </div>
  </div>

  <!-- Contenido de Intro -->
  <div class="intro-shell">
    <div class="card-wrap" role="region" [attr.aria-label]="slides[currentIndex]?.title">

      <!-- Visualizaci贸n de la Diapositiva -->
      <div class="card-image" [class.has-img]="slides[currentIndex]?.img">
        <img *ngIf="slides[currentIndex]?.img" [src]="slides[currentIndex].img" [alt]="slides[currentIndex].title"
          (load)="onImageLoad()" (error)="onImageError()">
      </div>

      <!-- Contenido de Texto -->
      <div class="card-body">
        <h2>{{ slides[currentIndex]?.title }}</h2>
        <p>{{ slides[currentIndex]?.text }}</p>

        <!-- Navegaci贸n de Puntos Modernizada -->
        <nav class="dots" aria-label="Navegaci贸n de diapositivas">
          <button class="dot" *ngFor="let s of slides; let j = index" [class.active]="j === currentIndex"
            (click)="goToSlide(j)" [attr.aria-label]="'Ir a '+slides[j].title"></button>
        </nav>

        <!-- Acciones Principales -->
        <div class="actions">
          <ion-button expand="block" (click)="currentIndex === slides.length - 1 ? goHome() : next()" class="cta-button"
            aria-label="Comenzar">
            {{ currentIndex === slides.length - 1 ? 'Empezar ahora' : 'Siguiente' }}
            <ion-icon
              [name]="currentIndex === slides.length - 1 ? 'rocket-outline' : 'arrow-forward-outline'"></ion-icon>
          </ion-button>

          <ion-button fill="clear" expand="block" (click)="skipToEnd()" class="skip-button"
            [attr.aria-label]="currentIndex === slides.length - 1 ? 'Volver al inicio' : 'Saltar'">
            {{ currentIndex === slides.length - 1 ? 'Ver nuevamente' : 'Saltar Intro' }}
          </ion-button>
        </div>
      </div>
    </div>

    <!-- Feedback para Lectura de Pantalla -->
    <div class="visually-hidden" aria-live="polite">{{ announceMessage }}</div>
  </div>
</ion-content>